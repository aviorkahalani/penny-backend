import{z as k,aa as d,ab as c,ac as r,ad as l,ag as A,ah as B,ai as I,aj as L,y as P,aM as N,ba as D,b6 as z,b8 as F,b9 as u,aZ as E,aT as V,aS as x}from"./chunk-OIYGIGL5-Dz3lc_zy.js";import{E as $}from"./ErrorMessage-DIpFTfxR.js";import{I as H}from"./InfoMessage-DYQarOZb.js";import{a as M,B as O}from"./index-CQkyZdDx.js";import{L as q}from"./loader-CDdZTNIB.js";import{F as G}from"./flex-B8HkVlIq.js";import{H as Q}from"./index-Bq3_AKH4.js";import{B as W}from"./button-DDr2X09M.js";import{S as _,C as U,a as Z,b as J}from"./simple-grid-CZrLuEes.js";import{F as h}from"./for-C-OR-lR2.js";import{T as f,B as K}from"./index-C0Fbvfe1.js";import{H as X}from"./h-stack-rVQXWdM4.js";import{c as Y,m as rr}from"./index-xKe__8mP.js";import"./center-D5cA64-E.js";import"./iconBase-wOx7auEl.js";const[j,p]=k({name:"ProgressContext",hookName:"useProgressContext",providerName:"<ProgressProvider />"}),b=d.forwardRef((s,e)=>{const o=p(),a=c(o.getLabelProps(),s);return r.jsx(l.label,{...a,ref:e})});b.displayName="ProgressLabel";const y=d.forwardRef((s,e)=>{const o=p(),a=c(o.getRangeProps(),s);return r.jsx(l.div,{...a,ref:e})});y.displayName="ProgressRange";const sr=s=>{const e=d.useId(),{getRootNode:o}=A(),{dir:a,locale:n}=B(),i={id:e,dir:a,locale:n,getRootNode:o,...s},m=I(rr,i);return Y(m,L)},v=d.forwardRef((s,e)=>{const[o,a]=P()(s,["defaultValue","formatOptions","id","ids","locale","max","min","onValueChange","orientation","translations","value"]),n=sr(o),i=c(n.getRootProps(),a);return r.jsx(j,{value:n,children:r.jsx(l.div,{...i,ref:e})})});v.displayName="ProgressRoot";const C=d.forwardRef((s,e)=>{const[{value:o},a]=P()(s,["value"]),n=c(o.getRootProps(),a);return r.jsx(j,{value:o,children:r.jsx(l.div,{...n,ref:e})})});C.displayName="ProgressRootProvider";const R=d.forwardRef((s,e)=>{const o=p(),a=c(o.getTrackProps(),s);return r.jsx(l.div,{...a,ref:e})});R.displayName="ProgressTrack";const w=d.forwardRef((s,e)=>{const{children:o,...a}=s,n=p(),i=c(n.getValueTextProps(),a);return r.jsx(l.span,{...i,ref:e,children:o||n.percentAsString})});w.displayName="ProgressValueText";const{withProvider:S,withContext:g}=N({key:"progress"});S(C,"root",{forwardAsChild:!0});const er=S(v,"root"),or=g(b,"label",{forwardAsChild:!0}),ar=g(R,"track",{forwardAsChild:!0}),tr=g(y,"range",{forwardAsChild:!0}),nr=g(w,"valueText",{forwardAsChild:!0}),ir=D.injectEndpoints({endpoints:s=>({fetchDashboardData:s.query({query:e=>({url:"/dashboard/"+e}),providesTags:[{type:"Dashboard",id:"LIST"}]})})}),{useFetchDashboardDataQuery:dr}=ir,Rr=()=>{const{budgetId:s}=z(),{data:e}=F(s??u),{data:o,error:a,isLoading:n}=dr(s??u);if(!s)return r.jsx(H,{text:"Please choose a budget to start... "});if(a)return r.jsx($,{error:"could not display dashboard..."});if(n)return r.jsx(q,{});if(o&&e){const i=Object.entries(o.summary),m={NIS:r.jsx(O,{}),USD:r.jsx(M,{})};return r.jsxs(E,{gap:"4",children:[r.jsxs(G,{alignItems:"center",justifyContent:"space-between",children:[r.jsx(Q,{children:"Overview"}),r.jsx(W,{alignSelf:"end",asChild:!0,size:"xs",variant:"surface",children:r.jsx(V,{to:`/budget/${e._id}`,children:"Go to budget"})})]}),r.jsx(_,{columns:{base:1,sm:2,md:4},gap:"1",children:r.jsx(h,{each:i,children:([t,T])=>r.jsxs(U,{variant:"subtle",children:[r.jsx(Z,{children:r.jsx(f,{fontWeight:"bold",fontSize:"xs",color:"fg.info",children:x.capitalize(t)})},t),r.jsx(J,{children:r.jsxs(f,{fontSize:"2xl",fontFamily:"mono",display:"flex",alignItems:"center",children:[T," ",r.jsx(K,{as:"span",color:"fg.subtle",children:m[e.currency]})]})})]},t)})}),r.jsx(h,{each:o.spentByCategory,children:t=>r.jsx(er,{maxW:"sm",value:Math.min(t.spent,t.plannedAmount),max:t.plannedAmount,children:r.jsxs(X,{gap:"5",children:[r.jsx(or,{children:x.capitalize(t.name)}),r.jsx(ar,{flex:"1",children:r.jsx(tr,{bg:t.spent>t.plannedAmount?"red.500":"green.400"})}),r.jsxs(nr,{color:t.spent>t.plannedAmount?"red.500":"gray.600",children:[t.spent," / ",t.plannedAmount]})]})},t.categoryId)})]})}return null};export{Rr as DashboardCharts};
