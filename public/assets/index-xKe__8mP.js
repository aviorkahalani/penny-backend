import{b as k,d as w,h as E,bb as C,bc as y,g as S}from"./chunk-OIYGIGL5-Dz3lc_zy.js";var $=k("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange"),i=$.build(),I=e=>e.ids?.root??`progress-${e.id}`,O=e=>e.ids?.track??`progress-${e.id}-track`,A=e=>e.ids?.label??`progress-${e.id}-label`,M=e=>e.ids?.circle??`progress-${e.id}-circle`;function F(e,t){const{context:r,computed:n,prop:a,send:s,scope:c}=e,o=n("percent"),P=n("isIndeterminate")?"":n("formatter").format(o/100),l=a("max"),v=a("min"),d=a("orientation"),T=a("translations"),p=n("isIndeterminate"),u=r.get("value"),x=T?.value({value:u,max:l,percent:o,min:v,formatter:n("formatter")})??"",m=R(u,l),V={role:"progressbar","aria-label":x,"data-max":l,"aria-valuemin":v,"aria-valuemax":l,"aria-valuenow":u??void 0,"data-orientation":d,"data-state":m},f=N(e);return{value:u,valueAsString:x,min:v,max:l,percent:o,percentAsString:P,indeterminate:p,setValue(g){s({type:"VALUE.SET",value:g})},setToMax(){s({type:"VALUE.SET",value:l})},setToMin(){s({type:"VALUE.SET",value:v})},getRootProps(){return t.element({dir:a("dir"),...i.root.attrs,id:I(c),"data-max":l,"data-value":u??void 0,"data-state":m,"data-orientation":d,style:{"--percent":p?void 0:o}})},getLabelProps(){return t.element({dir:a("dir"),id:A(c),...i.label.attrs,"data-orientation":d})},getValueTextProps(){return t.element({dir:a("dir"),"aria-live":"polite",...i.valueText.attrs})},getTrackProps(){return t.element({dir:a("dir"),id:O(c),...i.track.attrs,...V})},getRangeProps(){return t.element({dir:a("dir"),...i.range.attrs,"data-orientation":d,"data-state":m,style:{[n("isHorizontal")?"width":"height"]:p?void 0:`${o}%`}})},getCircleProps(){return t.element({dir:a("dir"),id:M(c),...i.circle.attrs,...V,...f.root})},getCircleTrackProps(){return t.element({dir:a("dir"),"data-orientation":d,...i.circleTrack.attrs,...f.track})},getCircleRangeProps(){return t.element({dir:a("dir"),...i.circleRange.attrs,...f.range,"data-state":m})},getViewProps(g){return t.element({dir:a("dir"),...i.view.attrs,"data-state":g.state,hidden:g.state!==m})}}}function R(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}var b={style:{"--radius":"calc(var(--size) / 2 - var(--thickness) / 2)",cx:"calc(var(--size) / 2)",cy:"calc(var(--size) / 2)",r:"var(--radius)",fill:"transparent",strokeWidth:"var(--thickness)"}},L={style:{width:"var(--size)",height:"var(--size)"}};function N(e){const{context:t,computed:r}=e;return{root:L,track:b,range:{opacity:t.get("value")===0?0:void 0,style:{...b.style,"--percent":r("percent"),"--circumference":"calc(2 * 3.14159 * var(--radius))","--offset":"calc(var(--circumference) * (100 - var(--percent)) / 100)",strokeDashoffset:"calc(var(--circumference) * ((100 - var(--percent)) / 100))",strokeDasharray:r("isIndeterminate")?void 0:"var(--circumference)",transformOrigin:"center",transform:"rotate(-90deg)"}}}}var W=E({props({props:e}){const t=e.min??0,r=e.max??100;return{orientation:"horizontal",...e,max:r,min:t,defaultValue:e.defaultValue!==void 0?e.defaultValue:H(t,r),formatOptions:{style:"percent",...e.formatOptions},translations:{value:({value:n,percent:a,formatter:s})=>{if(n===null)return"loading...";if(s){const o=s.resolvedOptions().style==="percent"?a/100:n;return s.format(o)}return n.toString()},...e.translations}}},initialState(){return"idle"},entry:["validateContext"],context({bindable:e,prop:t}){return{value:e(()=>({defaultValue:t("defaultValue"),value:t("value"),onChange(r){t("onValueChange")?.({value:r})}}))}},computed:{isIndeterminate:({context:e})=>e.get("value")===null,percent({context:e,prop:t}){const r=e.get("value");return y(r)?S(r,t("min"),t("max"))*100:-1},formatter:C(({prop:e})=>[e("locale"),e("formatOptions")],([e,t])=>new Intl.NumberFormat(e,t)),isHorizontal:({prop:e})=>e("orientation")==="horizontal"},states:{idle:{on:{"VALUE.SET":{actions:["setValue"]}}}},implementations:{actions:{setValue:({context:e,event:t,prop:r})=>{const n=t.value===null?null:Math.max(0,Math.min(t.value,r("max")));e.set("value",n)},validateContext:({context:e,prop:t})=>{const r=t("max"),n=t("min"),a=e.get("value");if(a!=null){if(!h(r))throw new Error(`[progress] The max value passed \`${r}\` is not a valid number`);if(!U(a,r))throw new Error(`[progress] The value passed \`${a}\` exceeds the max value \`${r}\``);if(!D(a,n))throw new Error(`[progress] The value passed \`${a}\` exceeds the min value \`${n}\``)}}}}}),h=e=>y(e)&&!isNaN(e),U=(e,t)=>h(e)&&e<=t,D=(e,t)=>h(e)&&e>=t,H=(e,t)=>e+(t-e)/2;w()(["dir","getRootNode","id","ids","max","min","orientation","translations","value","onValueChange","defaultValue","formatOptions","locale"]);export{$ as a,F as c,W as m};
