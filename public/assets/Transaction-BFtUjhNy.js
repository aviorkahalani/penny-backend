import{ac as e,aT as x,aX as b,b4 as g,aS as C,b8 as y,b6 as B,b9 as k}from"./chunk-OIYGIGL5-BJrXx6nP.js";import{u as v,a as M}from"./transaction-Dm1sfbCm.js";import{I as S}from"./InfoMessage-DMTaHo4M.js";import{E as A}from"./ErrorMessage-B_WJbRvy.js";import{T as F,a as d,b as i,c as I,d as R,e as l,f as o,C as z,o as D,g as P,h as $}from"./DotsThree.es-Cg5qqrhf.js";import{F as h}from"./flex-CGfNGPrr.js";import{T as w,B as j}from"./index-Bnpdpr_K.js";import{G as E}from"./group-DYm_rDK0.js";import{B as c}from"./button-DyY4O6zS.js";import{M as G,a as L,b as W,c as H,d as u,o as N,e as _,r as Q}from"./Trash.es-CUeaewor.js";import{B as O,a as U}from"./index-6zcL0IWK.js";import{I as X}from"./icon-BpbeDfqG.js";import{F as q}from"./for-C-OR-lR2.js";import{L as J}from"./loader-CkjxkFhi.js";import"./center-BleJ6I63.js";import"./IconBase.es-D8AGYXbC.js";import"./index-BmXwFx4H.js";import"./index-YkouNUqG.js";import"./iconBase-HbJlbdFW.js";const K=()=>e.jsx(F,{children:e.jsxs(d,{children:[e.jsx(i,{children:"Description"}),e.jsx(i,{children:"Type"}),e.jsx(i,{children:"Amount"}),e.jsx(i,{children:"Actions"})]})}),V=({budgetId:s})=>e.jsx(I,{mb:"4",captionSide:"top",fontSize:"md",textAlign:"start",children:e.jsxs(h,{alignItems:"center",justifyContent:"space-between",children:[e.jsx(w,{children:"Transactions"}),e.jsxs(E,{children:[e.jsx(c,{asChild:!0,size:"xs",variant:"surface",children:e.jsx(x,{to:`/budget/${s}`,children:"Go to budget"})}),e.jsx(c,{asChild:!0,size:"xs",variant:"outline",children:e.jsx(x,{to:`/budget/${s}/transaction`,children:"Add Transaction"})})]})]})}),Y=()=>e.jsxs(R,{children:[e.jsx(l,{htmlWidth:"70%"}),e.jsx(l,{htmlWidth:"10%"}),e.jsx(l,{htmlWidth:"10%"}),e.jsx(l,{htmlWidth:"10%"})]}),Z=()=>e.jsx(d,{children:e.jsxs(o,{colSpan:4,textAlign:"center",py:"6",color:"gray.500",children:["No transactions yet. Click ",e.jsx(z,{children:"Add Transaction"})," to get started."]})}),ee=({transactionId:s,handleUpdate:r,handleDelete:t})=>e.jsxs(G,{closeOnSelect:!0,variant:"subtle",children:[e.jsx(L,{asChild:!0,children:e.jsx(c,{variant:"ghost",onClick:n=>n.stopPropagation(),children:e.jsx(D,{})})}),e.jsx(b,{children:e.jsx(W,{children:e.jsxs(H,{children:[e.jsxs(u,{value:"edit",onClick:()=>r(s),children:[e.jsx(N,{}),e.jsx(j,{flex:"1",children:"Edit"})]}),e.jsx(_,{}),e.jsxs(u,{value:"delete",color:"red",onClick:()=>t(s),children:[e.jsx(Q,{}),e.jsx(j,{flex:"1",children:"Delete"})]})]})})})]}),se=({budgetId:s,transaction:r,currency:t})=>{const n=g(),[m]=v(),p=a=>{n(`/budget/${s}/transaction/${a}`)},T=a=>{m({budgetId:s,transactionId:a})},f=a=>({income:"fg.success",expense:"fg.error",saving:"fg.info"})[a];return e.jsxs(d,{children:[e.jsx(o,{children:r.description}),e.jsx(o,{color:f(r.type),children:C.capitalize(r.type)}),e.jsx(o,{children:e.jsxs(h,{justifyContent:"end",alignItems:"center",children:[r.amount,e.jsx(X,{size:"sm",color:"gray.500",children:t==="NIS"?e.jsx(O,{}):e.jsx(U,{})})]})}),e.jsx(o,{children:e.jsx(ee,{transactionId:r._id,handleUpdate:p,handleDelete:T})})]})},re=({budgetId:s,transactions:r,currency:t})=>e.jsx(P,{children:e.jsx(q,{each:r,fallback:e.jsx(Z,{}),children:n=>e.jsx(se,{budgetId:s,transaction:n,currency:t},n._id)})}),te=({budgetId:s,transactions:r})=>{const{data:t}=y(s);if(t)return e.jsxs($,{variant:"outline",children:[e.jsx(V,{budgetId:s}),e.jsx(Y,{}),e.jsx(K,{}),e.jsx(re,{budgetId:s,transactions:r,currency:t.currency})]})},ke=()=>{const{budgetId:s}=B(),{data:r,error:t,isLoading:n}=M(s??k);return s?t?e.jsx(A,{error:"could not display transactions..."}):n?e.jsx(J,{}):r&&s?e.jsx(te,{budgetId:s,transactions:r}):null:e.jsx(S,{text:"Please choose a budget to start... "})};export{ke as Transaction};
