import{h as ge,i as ce,b as ue,bn as y,bs as U,bt as j,bu as Q,ax as H,S as w,bv as de,bw as J,bx as he,by as pe,bz as ie,bA as Oe,bB as A,ab as Ee,bo as me,bC as Z,H as Te,j as M,D as Ie,E as fe,k as Pe,bD as ye,a6 as Ce,a4 as Re,Q as ve,u as Se,am as re,a7 as be,a3 as Ne,d as b,bh as ke,bE as Le,bF as Ae,x as Me}from"./chunk-OIYGIGL5-Dz3lc_zy.js";import{b as De,c as _e,g as z}from"./index-BaQg72dD.js";var R=(e,t)=>({x:e,y:t});function He(e){const{x:t,y:r,width:n,height:o}=e,g=t+n/2,a=r+o/2;return{x:t,y:r,width:n,height:o,minX:t,minY:r,maxX:t+n,maxY:r+o,midX:g,midY:a,center:R(g,a)}}function we(e){const t=R(e.minX,e.minY),r=R(e.maxX,e.minY),n=R(e.maxX,e.maxY),o=R(e.minX,e.maxY);return{top:t,right:r,bottom:n,left:o}}function Ve(e,t){const r=He(e),{top:n,right:o,left:g,bottom:a}=we(r),[l]=t.split("-");return{top:[g,n,o,a],right:[n,o,a,g],bottom:[n,g,a,o],left:[o,n,g,a]}[l]}function Ge(e,t){const{x:r,y:n}=t;let o=!1;for(let g=0,a=e.length-1;g<e.length;a=g++){const l=e[g].x,u=e[g].y,T=e[a].x,k=e[a].y;u>n!=k>n&&r<(T-l)*(n-u)/(k-u)+l&&(o=!o)}return o}var Fe=ue("menu").parts("arrow","arrowTip","content","contextTrigger","indicator","item","itemGroup","itemGroupLabel","itemIndicator","itemText","positioner","separator","trigger","triggerItem"),h=Fe.build(),V=e=>e.ids?.trigger??`menu:${e.id}:trigger`,oe=e=>e.ids?.contextTrigger??`menu:${e.id}:ctx-trigger`,v=e=>e.ids?.content??`menu:${e.id}:content`,xe=e=>e.ids?.arrow??`menu:${e.id}:arrow`,ae=e=>e.ids?.positioner??`menu:${e.id}:popper`,Ue=(e,t)=>e.ids?.group?.(t)??`menu:${e.id}:group:${t}`,S=(e,t)=>`${e.id}/${t}`,P=e=>e?.dataset.value??null,ee=(e,t)=>e.ids?.groupLabel?.(t)??`menu:${e.id}:group-label:${t}`,f=e=>e.getById(v(e)),te=e=>e.getById(ae(e)),D=e=>e.getById(V(e)),We=(e,t)=>t?e.getById(S(e,t)):null,W=e=>e.getById(oe(e)),N=e=>{const r=`[role^="menuitem"][data-ownedby=${CSS.escape(v(e))}]:not([data-disabled])`;return Me(f(e),r)},Be=e=>fe(N(e)),Xe=e=>Ie(N(e)),X=(e,t)=>t?e.id===t||e.dataset.value===t:!1,Ye=(e,t)=>{const r=N(e),n=r.findIndex(o=>X(o,t.value));return Ae(r,n,{loop:t.loop??t.loopFocus})},Ke=(e,t)=>{const r=N(e),n=r.findIndex(o=>X(o,t.value));return Le(r,n,{loop:t.loop??t.loopFocus})},$e=(e,t)=>{const r=N(e),n=r.find(o=>X(o,t.value));return re(r,{state:t.typeaheadState,key:t.key,activeId:n?.id??null})},_=e=>Te(e)&&(e.dataset.disabled===""||e.hasAttribute("disabled")),qe=e=>!!e?.getAttribute("role")?.startsWith("menuitem")&&!!e?.hasAttribute("aria-controls"),B="menu:select";function je(e,t){if(!e)return;const r=ke(e),n=new r.CustomEvent(B,{detail:{value:t}});e.dispatchEvent(n)}function tt(e,t){const{context:r,send:n,state:o,computed:g,prop:a,scope:l}=e,u=o.hasTag("open"),T=r.get("isSubmenu"),k=g("isTypingAhead"),Y=a("composite"),K=r.get("currentPlacement"),se=r.get("anchorPoint"),$=r.get("highlightedValue"),G=De({...a("positioning"),placement:se?"bottom":K});function F(i){return{id:S(l,i.value),disabled:!!i.disabled,highlighted:$===i.value}}function q(i){const s=i.valueText??i.value;return{...i,id:i.value,valueText:s}}function L(i){return{...F(q(i)),checked:!!i.checked}}function x(i){const{closeOnSelect:s,valueText:d,value:m}=i,p=F(i),E=S(l,m);return t.element({...h.item.attrs,id:E,role:"menuitem","aria-disabled":me(p.disabled),"data-disabled":y(p.disabled),"data-ownedby":v(l),"data-highlighted":y(p.highlighted),"data-value":m,"data-valuetext":d,onDragStart(c){c.currentTarget.matches("a[href]")&&c.preventDefault()},onPointerMove(c){if(p.disabled||c.pointerType!=="mouse")return;const I=c.currentTarget;p.highlighted||n({type:"ITEM_POINTERMOVE",id:E,target:I,closeOnSelect:s})},onPointerLeave(c){if(p.disabled||c.pointerType!=="mouse"||!e.event.previous()?.type.includes("POINTER"))return;const le=c.currentTarget;n({type:"ITEM_POINTERLEAVE",id:E,target:le,closeOnSelect:s})},onPointerDown(c){if(p.disabled)return;const I=c.currentTarget;n({type:"ITEM_POINTERDOWN",target:I,id:E,closeOnSelect:s})},onClick(c){if(j(c)||Q(c)||p.disabled)return;const I=c.currentTarget;n({type:"ITEM_CLICK",target:I,id:E,closeOnSelect:s})}})}return{highlightedValue:$,open:u,setOpen(i){o.hasTag("open")!==i&&n({type:i?"OPEN":"CLOSE"})},setHighlightedValue(i){n({type:"HIGHLIGHTED.SET",value:i})},setParent(i){n({type:"PARENT.SET",value:i,id:i.prop("id")})},setChild(i){n({type:"CHILD.SET",value:i,id:i.prop("id")})},reposition(i={}){n({type:"POSITIONING.SET",options:i})},addItemListener(i){const s=l.getById(i.id);if(!s)return;const d=()=>i.onSelect?.();return s.addEventListener(B,d),()=>s.removeEventListener(B,d)},getContextTriggerProps(){return t.element({...h.contextTrigger.attrs,dir:a("dir"),id:oe(l),"data-state":u?"open":"closed",onPointerDown(i){if(i.pointerType==="mouse")return;const s=A(i);n({type:"CONTEXT_MENU_START",point:s})},onPointerCancel(i){i.pointerType!=="mouse"&&n({type:"CONTEXT_MENU_CANCEL"})},onPointerMove(i){i.pointerType!=="mouse"&&n({type:"CONTEXT_MENU_CANCEL"})},onPointerUp(i){i.pointerType!=="mouse"&&n({type:"CONTEXT_MENU_CANCEL"})},onContextMenu(i){const s=A(i);n({type:"CONTEXT_MENU",point:s}),i.preventDefault()},style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none"}})},getTriggerItemProps(i){const s=i.getTriggerProps();return Ee(x({value:s.id}),s)},getTriggerProps(){return t.button({...T?h.triggerItem.attrs:h.trigger.attrs,"data-placement":r.get("currentPlacement"),type:"button",dir:a("dir"),id:V(l),"data-uid":a("id"),"aria-haspopup":Y?"menu":"dialog","aria-controls":v(l),"aria-expanded":u||void 0,"data-state":u?"open":"closed",onPointerMove(i){if(i.pointerType!=="mouse"||_(i.currentTarget)||!T)return;const d=A(i);n({type:"TRIGGER_POINTERMOVE",target:i.currentTarget,point:d})},onPointerLeave(i){if(_(i.currentTarget)||i.pointerType!=="mouse"||!T)return;const s=A(i);n({type:"TRIGGER_POINTERLEAVE",target:i.currentTarget,point:s})},onPointerDown(i){_(i.currentTarget)||Oe(i)||i.preventDefault()},onClick(i){i.defaultPrevented||_(i.currentTarget)||n({type:"TRIGGER_CLICK",target:i.currentTarget})},onBlur(){n({type:"TRIGGER_BLUR"})},onFocus(){n({type:"TRIGGER_FOCUS"})},onKeyDown(i){if(i.defaultPrevented)return;const s={ArrowDown(){n({type:"ARROW_DOWN"})},ArrowUp(){n({type:"ARROW_UP"})},Enter(){n({type:"ARROW_DOWN",src:"enter"})},Space(){n({type:"ARROW_DOWN",src:"space"})}},d=J(i,{orientation:"vertical",dir:a("dir")}),m=s[d];m&&(i.preventDefault(),m(i))}})},getIndicatorProps(){return t.element({...h.indicator.attrs,dir:a("dir"),"data-state":u?"open":"closed"})},getPositionerProps(){return t.element({...h.positioner.attrs,dir:a("dir"),id:ae(l),style:G.floating})},getArrowProps(){return t.element({id:xe(l),...h.arrow.attrs,dir:a("dir"),style:G.arrow})},getArrowTipProps(){return t.element({...h.arrowTip.attrs,dir:a("dir"),style:G.arrowTip})},getContentProps(){return t.element({...h.content.attrs,id:v(l),"aria-label":a("aria-label"),hidden:!u,"data-state":u?"open":"closed",role:Y?"menu":"dialog",tabIndex:0,dir:a("dir"),"aria-activedescendant":g("highlightedId")||void 0,"aria-labelledby":V(l),"data-placement":K,onPointerEnter(i){i.pointerType==="mouse"&&n({type:"MENU_POINTERENTER"})},onKeyDown(i){if(i.defaultPrevented||!H(i.currentTarget,w(i)))return;const s=w(i);if(!(s?.closest("[role=menu]")===i.currentTarget||s===i.currentTarget))return;if(i.key==="Tab"&&!de(i)){i.preventDefault();return}const m={ArrowDown(){n({type:"ARROW_DOWN"})},ArrowUp(){n({type:"ARROW_UP"})},ArrowLeft(){n({type:"ARROW_LEFT"})},ArrowRight(){n({type:"ARROW_RIGHT"})},Enter(){n({type:"ENTER"})},Space(c){k?n({type:"TYPEAHEAD",key:c.key}):m.Enter?.(c)},Home(){n({type:"HOME"})},End(){n({type:"END"})}},p=J(i,{dir:a("dir")}),E=m[p];if(E){E(i),i.stopPropagation(),i.preventDefault();return}a("typeahead")&&he(i)&&(pe(i)||ie(s)||(n({type:"TYPEAHEAD",key:i.key}),i.preventDefault()))}})},getSeparatorProps(){return t.element({...h.separator.attrs,role:"separator",dir:a("dir"),"aria-orientation":"horizontal"})},getItemState:F,getItemProps:x,getOptionItemState:L,getOptionItemProps(i){const{type:s,disabled:d,closeOnSelect:m}=i,p=q(i),E=L(i);return{...x(p),...t.element({"data-type":s,...h.item.attrs,dir:a("dir"),"data-value":p.value,role:`menuitem${s}`,"aria-checked":!!E.checked,"data-state":E.checked?"checked":"unchecked",onClick(c){if(d||j(c)||Q(c))return;const I=c.currentTarget;n({type:"ITEM_CLICK",target:I,option:p,closeOnSelect:m})}})}},getItemIndicatorProps(i){const s=L(Z(i)),d=s.checked?"checked":"unchecked";return t.element({...h.itemIndicator.attrs,dir:a("dir"),"data-disabled":y(s.disabled),"data-highlighted":y(s.highlighted),"data-state":U(i,"checked")?d:void 0,hidden:U(i,"checked")?!s.checked:void 0})},getItemTextProps(i){const s=L(Z(i)),d=s.checked?"checked":"unchecked";return t.element({...h.itemText.attrs,dir:a("dir"),"data-disabled":y(s.disabled),"data-highlighted":y(s.highlighted),"data-state":U(i,"checked")?d:void 0})},getItemGroupLabelProps(i){return t.element({...h.itemGroupLabel.attrs,id:ee(l,i.htmlFor),dir:a("dir")})},getItemGroupProps(i){return t.element({id:Ue(l,i.id),...h.itemGroup.attrs,dir:a("dir"),"aria-labelledby":ee(l,i.id),role:"group"})}}}var{not:O,and:C,or:Qe}=ce(),nt=ge({props({props:e}){return{closeOnSelect:!0,typeahead:!0,composite:!0,loopFocus:!1,navigate(t){be(t.node)},...e,positioning:{placement:"bottom-start",gutter:8,...e.positioning}}},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"idle"},context({bindable:e,prop:t}){return{suspendPointer:e(()=>({defaultValue:!1})),highlightedValue:e(()=>({defaultValue:t("defaultHighlightedValue")||null,value:t("highlightedValue"),onChange(r){t("onHighlightChange")?.({highlightedValue:r})}})),lastHighlightedValue:e(()=>({defaultValue:null})),currentPlacement:e(()=>({defaultValue:void 0})),intentPolygon:e(()=>({defaultValue:null})),anchorPoint:e(()=>({defaultValue:null,hash(r){return`x: ${r?.x}, y: ${r?.y}`}})),isSubmenu:e(()=>({defaultValue:!1}))}},refs(){return{parent:null,children:{},typeaheadState:{...re.defaultOptions},positioningOverride:{}}},computed:{isRtl:({prop:e})=>e("dir")==="rtl",isTypingAhead:({refs:e})=>e.get("typeaheadState").keysSoFar!=="",highlightedId:({context:e,scope:t,refs:r})=>Ze(r.get("children"),e.get("highlightedValue"),t)},watch({track:e,action:t,context:r,prop:n}){e([()=>r.get("isSubmenu")],()=>{t(["setSubmenuPlacement"])}),e([()=>r.hash("anchorPoint")],()=>{r.get("anchorPoint")&&t(["reposition"])}),e([()=>n("open")],()=>{t(["toggleVisibility"])})},on:{"PARENT.SET":{actions:["setParentMenu"]},"CHILD.SET":{actions:["setChildMenu"]},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],OPEN_AUTOFOCUS:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["highlightFirstItem","invokeOnOpen"]}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"HIGHLIGHTED.RESTORE":{actions:["restoreHighlightedItem"]},"HIGHLIGHTED.SET":{actions:["setHighlightedItem"]}},states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":{target:"open"},"CONTROLLED.CLOSE":{target:"closed"},CONTEXT_MENU_START:{target:"opening:contextmenu",actions:["setAnchorPoint"]},CONTEXT_MENU:[{guard:"isOpenControlled",actions:["setAnchorPoint","invokeOnOpen"]},{target:"open",actions:["setAnchorPoint","invokeOnOpen"]}],TRIGGER_CLICK:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TRIGGER_FOCUS:{guard:O("isSubmenu"),target:"closed"},TRIGGER_POINTERMOVE:{guard:"isSubmenu",target:"opening"}}},"opening:contextmenu":{tags:["closed"],effects:["waitForLongPress"],on:{"CONTROLLED.OPEN":{target:"open"},"CONTROLLED.CLOSE":{target:"closed"},CONTEXT_MENU_CANCEL:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"LONG_PRESS.OPEN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}},opening:{tags:["closed"],effects:["waitForOpenDelay"],on:{"CONTROLLED.OPEN":{target:"open"},"CONTROLLED.CLOSE":{target:"closed"},BLUR:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],TRIGGER_POINTERLEAVE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"DELAY.OPEN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}]}},closing:{tags:["open"],effects:["trackPointerMove","trackInteractOutside","waitForCloseDelay"],on:{"CONTROLLED.OPEN":{target:"open"},"CONTROLLED.CLOSE":{target:"closed",actions:["focusParentMenu","restoreParentHighlightedItem"]},MENU_POINTERENTER:{target:"open",actions:["clearIntentPolygon"]},POINTER_MOVED_AWAY_FROM_SUBMENU:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["focusParentMenu","restoreParentHighlightedItem"]}],"DELAY.CLOSE":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["focusParentMenu","restoreParentHighlightedItem","invokeOnClose"]}]}},closed:{tags:["closed"],entry:["clearHighlightedItem","focusTrigger","resumePointer","clearAnchorPoint"],on:{"CONTROLLED.OPEN":[{guard:Qe("isOpenAutoFocusEvent","isArrowDownEvent"),target:"open",actions:["highlightFirstItem"]},{guard:"isArrowUpEvent",target:"open",actions:["highlightLastItem"]},{target:"open"}],CONTEXT_MENU_START:{target:"opening:contextmenu",actions:["setAnchorPoint"]},CONTEXT_MENU:[{guard:"isOpenControlled",actions:["setAnchorPoint","invokeOnOpen"]},{target:"open",actions:["setAnchorPoint","invokeOnOpen"]}],TRIGGER_CLICK:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen"]}],TRIGGER_POINTERMOVE:{guard:"isTriggerItem",target:"opening"},TRIGGER_BLUR:{target:"idle"},ARROW_DOWN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["highlightFirstItem","invokeOnOpen"]}],ARROW_UP:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["highlightLastItem","invokeOnOpen"]}]}},open:{tags:["open"],effects:["trackInteractOutside","trackPositioning","scrollToHighlightedItem"],entry:["focusMenu","resumePointer"],on:{"CONTROLLED.CLOSE":[{target:"closed",guard:"isArrowLeftEvent",actions:["focusParentMenu"]},{target:"closed"}],TRIGGER_CLICK:[{guard:C(O("isTriggerItem"),"isOpenControlled"),actions:["invokeOnClose"]},{guard:O("isTriggerItem"),target:"closed",actions:["invokeOnClose"]}],CONTEXT_MENU:{actions:["setAnchorPoint","focusMenu"]},ARROW_UP:{actions:["highlightPrevItem","focusMenu"]},ARROW_DOWN:{actions:["highlightNextItem","focusMenu"]},ARROW_LEFT:[{guard:C("isSubmenu","isOpenControlled"),actions:["invokeOnClose"]},{guard:"isSubmenu",target:"closed",actions:["focusParentMenu","invokeOnClose"]}],HOME:{actions:["highlightFirstItem","focusMenu"]},END:{actions:["highlightLastItem","focusMenu"]},ARROW_RIGHT:{guard:"isTriggerItemHighlighted",actions:["openSubmenu"]},ENTER:[{guard:"isTriggerItemHighlighted",actions:["openSubmenu"]},{actions:["clickHighlightedItem"]}],ITEM_POINTERMOVE:[{guard:O("isPointerSuspended"),actions:["setHighlightedItem","focusMenu"]},{actions:["setLastHighlightedItem"]}],ITEM_POINTERLEAVE:{guard:C(O("isPointerSuspended"),O("isTriggerItem")),actions:["clearHighlightedItem"]},ITEM_CLICK:[{guard:C(O("isTriggerItemHighlighted"),O("isHighlightedItemEditable"),"closeOnSelect","isOpenControlled"),actions:["invokeOnSelect","setOptionState","closeRootMenu","invokeOnClose"]},{guard:C(O("isTriggerItemHighlighted"),O("isHighlightedItemEditable"),"closeOnSelect"),target:"closed",actions:["invokeOnSelect","setOptionState","closeRootMenu","invokeOnClose"]},{guard:C(O("isTriggerItemHighlighted"),O("isHighlightedItemEditable")),actions:["invokeOnSelect","setOptionState"]},{actions:["setHighlightedItem"]}],TRIGGER_POINTERMOVE:{guard:"isTriggerItem",actions:["setIntentPolygon"]},TRIGGER_POINTERLEAVE:{target:"closing"},ITEM_POINTERDOWN:{actions:["setHighlightedItem"]},TYPEAHEAD:{actions:["highlightMatchedItem"]},FOCUS_MENU:{actions:["focusMenu"]},"POSITIONING.SET":{actions:["reposition"]}}}},implementations:{guards:{closeOnSelect:({prop:e,event:t})=>!!(t?.closeOnSelect??e("closeOnSelect")),isTriggerItem:({event:e})=>qe(e.target),isTriggerItemHighlighted:({event:e,scope:t,computed:r})=>!!(e.target??t.getById(r("highlightedId")))?.hasAttribute("aria-controls"),isSubmenu:({context:e})=>e.get("isSubmenu"),isPointerSuspended:({context:e})=>e.get("suspendPointer"),isHighlightedItemEditable:({scope:e,computed:t})=>ie(e.getById(t("highlightedId"))),isOpenControlled:({prop:e})=>e("open")!==void 0,isArrowLeftEvent:({event:e})=>e.previousEvent?.type==="ARROW_LEFT",isArrowUpEvent:({event:e})=>e.previousEvent?.type==="ARROW_UP",isArrowDownEvent:({event:e})=>e.previousEvent?.type==="ARROW_DOWN",isOpenAutoFocusEvent:({event:e})=>e.previousEvent?.type==="OPEN_AUTOFOCUS"},effects:{waitForOpenDelay({send:e}){const t=setTimeout(()=>{e({type:"DELAY.OPEN"})},100);return()=>clearTimeout(t)},waitForCloseDelay({send:e}){const t=setTimeout(()=>{e({type:"DELAY.CLOSE"})},300);return()=>clearTimeout(t)},waitForLongPress({send:e}){const t=setTimeout(()=>{e({type:"LONG_PRESS.OPEN"})},700);return()=>clearTimeout(t)},trackPositioning({context:e,prop:t,scope:r,refs:n}){if(W(r))return;const o={...t("positioning"),...n.get("positioningOverride")};e.set("currentPlacement",o.placement);const g=()=>te(r);return z(D(r),g,{...o,defer:!0,onComplete(a){e.set("currentPlacement",a.placement)}})},trackInteractOutside({refs:e,scope:t,prop:r,context:n,send:o}){const g=()=>f(t);let a=!0;return Se(g,{type:"menu",defer:!0,exclude:[D(t)],onInteractOutside:r("onInteractOutside"),onRequestDismiss:r("onRequestDismiss"),onFocusOutside(l){r("onFocusOutside")?.(l);const u=w(l.detail.originalEvent);if(H(W(t),u)){l.preventDefault();return}},onEscapeKeyDown(l){r("onEscapeKeyDown")?.(l),n.get("isSubmenu")&&l.preventDefault(),ne({parent:e.get("parent")})},onPointerDownOutside(l){r("onPointerDownOutside")?.(l);const u=w(l.detail.originalEvent);if(H(W(t),u)&&l.detail.contextmenu){l.preventDefault();return}a=!l.detail.focusable},onDismiss(){o({type:"CLOSE",src:"interact-outside",restoreFocus:a})}})},trackPointerMove({context:e,scope:t,send:r,refs:n,flush:o}){const g=n.get("parent");o(()=>{g.context.set("suspendPointer",!0)});const a=t.getDoc();return ve(a,"pointermove",l=>{Je(e.get("intentPolygon"),{x:l.clientX,y:l.clientY})||(r({type:"POINTER_MOVED_AWAY_FROM_SUBMENU"}),g.context.set("suspendPointer",!1))})},scrollToHighlightedItem({event:e,scope:t,computed:r}){const n=()=>{if(e.current().type.startsWith("ITEM_POINTER"))return;const g=t.getById(r("highlightedId")),a=f(t);Ne(g,{rootEl:a,block:"nearest"})};return M(()=>n()),Re(()=>f(t),{defer:!0,attributes:["aria-activedescendant"],callback:n})}},actions:{setAnchorPoint({context:e,event:t}){e.set("anchorPoint",r=>Ce(r,t.point)?r:t.point)},setSubmenuPlacement({context:e,computed:t,refs:r}){if(!e.get("isSubmenu"))return;const n=t("isRtl")?"left-start":"right-start";r.set("positioningOverride",{placement:n,gutter:0})},reposition({context:e,scope:t,prop:r,event:n,refs:o}){const g=()=>te(t),a=e.get("anchorPoint"),l=a?()=>({width:0,height:0,...a}):void 0,u={...r("positioning"),...o.get("positioningOverride")};z(D(t),g,{...u,defer:!0,getAnchorRect:l,...n.options??{},listeners:!1,onComplete(T){e.set("currentPlacement",T.placement)}})},setOptionState({event:e}){if(!e.option)return;const{checked:t,onCheckedChange:r,type:n}=e.option;n==="radio"?r?.(!0):n==="checkbox"&&r?.(!t)},clickHighlightedItem({scope:e,computed:t,prop:r,context:n}){const o=e.getById(t("highlightedId"));if(!o||o.dataset.disabled)return;const g=n.get("highlightedValue");ye(o)?r("navigate")?.({value:g,node:o,href:o.href}):queueMicrotask(()=>o.click())},setIntentPolygon({context:e,scope:t,event:r}){const n=f(t),o=e.get("currentPlacement");if(!n||!o)return;const g=n.getBoundingClientRect(),a=Ve(g,o);if(!a)return;const u=_e(o)==="right"?-5:5;e.set("intentPolygon",[{...r.point,x:r.point.x+u},...a])},clearIntentPolygon({context:e}){e.set("intentPolygon",null)},clearAnchorPoint({context:e}){e.set("anchorPoint",null)},resumePointer({refs:e,flush:t}){const r=e.get("parent");r&&t(()=>{r.context.set("suspendPointer",!1)})},setHighlightedItem({context:e,event:t}){const r=t.value||P(t.target);e.set("highlightedValue",r)},clearHighlightedItem({context:e}){e.set("highlightedValue",null)},focusMenu({scope:e}){M(()=>{const t=f(e);Pe({root:t,enabled:!H(t,e.getActiveElement()),filter(n){return!n.role?.startsWith("menuitem")}})?.focus({preventScroll:!0})})},highlightFirstItem({context:e,scope:t}){(f(t)?queueMicrotask:M)(()=>{const n=Be(t);n&&e.set("highlightedValue",P(n))})},highlightLastItem({context:e,scope:t}){(f(t)?queueMicrotask:M)(()=>{const n=Xe(t);n&&e.set("highlightedValue",P(n))})},highlightNextItem({context:e,scope:t,event:r,prop:n}){const o=Ye(t,{loop:r.loop,value:e.get("highlightedValue"),loopFocus:n("loopFocus")});e.set("highlightedValue",P(o))},highlightPrevItem({context:e,scope:t,event:r,prop:n}){const o=Ke(t,{loop:r.loop,value:e.get("highlightedValue"),loopFocus:n("loopFocus")});e.set("highlightedValue",P(o))},invokeOnSelect({context:e,prop:t,scope:r}){const n=e.get("highlightedValue");if(n==null)return;const o=We(r,n);je(o,n),t("onSelect")?.({value:n})},focusTrigger({scope:e,context:t,event:r}){t.get("isSubmenu")||t.get("anchorPoint")||r.restoreFocus===!1||queueMicrotask(()=>D(e)?.focus({preventScroll:!0}))},highlightMatchedItem({scope:e,context:t,event:r,refs:n}){const o=$e(e,{key:r.key,value:t.get("highlightedValue"),typeaheadState:n.get("typeaheadState")});o&&t.set("highlightedValue",P(o))},setParentMenu({refs:e,event:t,context:r}){e.set("parent",t.value),r.set("isSubmenu",!0)},setChildMenu({refs:e,event:t}){const r=e.get("children");r[t.id]=t.value,e.set("children",r)},closeRootMenu({refs:e}){ne({parent:e.get("parent")})},openSubmenu({refs:e,scope:t,computed:r}){const o=t.getById(r("highlightedId"))?.getAttribute("data-uid"),g=e.get("children");(o?g[o]:null)?.send({type:"OPEN_AUTOFOCUS"})},focusParentMenu({refs:e}){e.get("parent")?.send({type:"FOCUS_MENU"})},setLastHighlightedItem({context:e,event:t}){e.set("lastHighlightedValue",P(t.target))},restoreHighlightedItem({context:e}){e.get("lastHighlightedValue")&&(e.set("highlightedValue",e.get("lastHighlightedValue")),e.set("lastHighlightedValue",null))},restoreParentHighlightedItem({refs:e}){e.get("parent")?.send({type:"HIGHLIGHTED.RESTORE"})},invokeOnOpen({prop:e}){e("onOpenChange")?.({open:!0})},invokeOnClose({prop:e}){e("onOpenChange")?.({open:!1})},toggleVisibility({prop:e,event:t,send:r}){r({type:e("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:t})}}}});function ne(e){let t=e.parent;for(;t&&t.context.get("isSubmenu");)t=t.refs.get("parent");t?.send({type:"CLOSE"})}function Je(e,t){return e?Ge(e,t):!1}function Ze(e,t,r){const n=Object.keys(e).length>0;if(!t)return null;if(!n)return S(r,t);for(const o in e){const g=e[o],a=V(g.scope);if(a===t)return a}return S(r,t)}b()(["anchorPoint","aria-label","closeOnSelect","composite","defaultHighlightedValue","defaultOpen","dir","getRootNode","highlightedValue","id","ids","loopFocus","navigate","onEscapeKeyDown","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onRequestDismiss","onSelect","open","positioning","typeahead"]);b()(["closeOnSelect","disabled","value","valueText"]);b()(["htmlFor"]);b()(["id"]);b()(["checked","closeOnSelect","disabled","onCheckedChange","type","value","valueText"]);export{Fe as a,tt as c,nt as m};
